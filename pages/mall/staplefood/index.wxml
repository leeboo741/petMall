<!--pages/mall/ff/index.wxml-->
<i-navigation-bar title='商城' showBackButton='{{true}}'>
</i-navigation-bar>

<!-- 头部信息 -->
<view class="foodgrainmore-head" style="height:50px">
  <view class="foodgrainmore-head-titleselect" wx:for='{{titleSelectList}}' wx:for-item="titleSelectItem" wx:for-index="titleSelectIndex" wx:key='{{titleSelectIndex}}' bindtap="titleSelectTap" data-index="{{titleSelectIndex}}" data-key="{{titleSelectItem.selectInfo}}"
    style="color:{{parse.textShowColor(titleSelectItem.showSelect)}}">
    {{titleSelectItem.selectInfo}}
    <i-icon type="{{titleSelectItem.showSelect?'unfold':'packup'}}" size="20" />
  </view>
</view>

<!-- 图片展示信息 -->
<view class="foodgrain-page">
  <view class="foodgrain-page-formation" wx:for='{{itemList}}' wx:for-item="dataSourceItem" wx:for-index="dataSourceIndex" wx:key='{{dataSourceIndex}}' bindtap="commodityInforMationTap" data-key="{{dataSourceItem}}" data-itemno='{{dataSourceItem.itemNo}}'>
    <i-image i-class="foodgrain-page-formation-head" imageSrc="{{dataSourceItem.coverImg}}">
    </i-image>
    <view class="foodgrain-page-formation-middle">
      {{dataSourceItem.itemName}}
    </view>
    <view class="foodgrain-page-formation-introduce">
      {{dataSourceItem.itemStage}}
    </view>
    <view class="foodgrain-page-formation-down">
      <view class="foodgrain-page-formation-down-left">
        <view class="foodgrain-page-formation-down-price">
          ￥{{dataSourceItem.retailPrice}}
        </view>
        <view class="foodgrain-page-formation-down-member">
          会员价
        </view>
      </view>
      <view class="foodgrain-page-formation-down-originalPrice">
        ￥{{dataSourceItem.marketPrice}}
      </view>
    </view>
  </view>
</view>

<i-load-foot-item loadState='{{loadState}}'>
</i-load-foot-item>

<!--下拉信息-->
<view class="dropdownbox-infomation" hidden="{{showDropDownMessage}}">
  <view class="dropdownbox-infomation-table" bindtap="selectDropDownMessageDataTap" data-index="{{-1}}">
  全部
  </view>
  <view class="dropdownbox-infomation-table" wx:for='{{dropDownMessageData}}' wx:for-item="dropDownMessageDataItem" wx:for-index="dropDownMessageDataIndex" wx:key='{{dropDownMessageDataIndex}}' bindtap="selectDropDownMessageDataTap" data-index="{{dropDownMessageDataIndex}}">
    {{parse.showTitleInfor(dropDownMessageDataItem,titleSelectIndex)}}
  </view>
</view>



<!--蒙版-->
<view class="mask-page" hidden="{{maskVarietiesShow}}" bindtap="maskVarietiesTap">
</view>
<view class="mask-page" hidden="{{maskFavoritegrainShow}}" bindtap="maskFavoritegrainTap">
</view>
<view class="mask-page" hidden="{{maskbrandShow}}" bindtap="maskbrandTap">
</view>

<wxs module='parse'>
  module.exports = {
    textShowColor: function(res) {
      if (res == true) {
        return "black"
      } else {
        return "#ED630A"
      }
    },

    showTitleInfor: function(res, resIndex) {
      if (resIndex == 0) {
        return res.itemClassifyName
      } else if (resIndex == 1) {
        return res.itemTypeName
      } else {
        return res.itemBrandName
      }
    }
  }
</wxs>